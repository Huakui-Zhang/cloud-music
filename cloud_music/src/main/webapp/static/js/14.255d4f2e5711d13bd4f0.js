webpackJsonp([14],{"/CtB":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("0Qqk"),i=r("mx1b"),l=r("T0cg"),s=r.n(l),n={data:function(){return{region:0,initial:"@",gender:0,page:1,pageCount:5,singers:[],popoverVisible:!1,imageUrl:"",hasChangeImage:!1,items:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],rules:{name:[{required:!0,message:"请输入歌手名称",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30 个字",trigger:"blur"}],genders:[{required:!0,message:"请选择性别",trigger:"change"}],birthday:[{type:"string",required:!0,message:"请选择生日",trigger:"change"}],birthplace:[{max:30,message:"长度在 30 字以内",trigger:"blur"},{required:!0,message:"请选择出生地",trigger:"change"}],occupation:[{max:10,message:"长度在 10 字以内",trigger:"blur"}],representative:[{max:30,message:"长度在 30 字以内",trigger:"blur"}],country:[{min:1,max:15,message:"长度在 15 字以内",trigger:"blur"},{required:!0,message:"请选择国籍",trigger:"change"}],initials:[{required:!0,message:"请选择名字首字母",trigger:"change"}],regions:[{required:!0,message:"请选择地区",trigger:"change"}],intro:[{min:1,max:680,message:"长度在 680 字以内",trigger:"blur"}]},ruleForm:{id:"",name:"",genders:"",birthplace:"",occupation:"",birthday:"",representative:"",intro:"",country:"",image:"",regions:"",initials:""},playlistList:[{id:"1",name:"1",count:""},{id:"2",name:"2",count:""},{id:"3",name:"3",count:""}]}},components:{vHead:a.a,vFoot:i.a},computed:{serverUrl:function(){return this.$store.state.serverUrl}},mounted:function(){this.singerDisplay(0,"@",0,1)},methods:{handleCurrentChange:function(e){this.singerDisplay(0,"!",0,e)},timeStampToTime:function(e){var t=new Date(e),r=t.getFullYear()+"-",a=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",i=t.getDate();return i<10&&(i="0"+i),r+a+i},singerDisplay:function(e,t,r,a){var i=this;0!=a?(e=this.region,t=this.initial,r=this.gender,this.page=a):"!"!=t?(e=this.region,r=this.gender,this.initial=t,a=this.page=1):-1!=e?(t=this.initial,r=this.gender,this.region=e,a=this.page=1):(e=this.region,t=this.initial,this.gender=r,a=this.page=1),this.axios.get(this.serverUrl+"/artist/filterArtist",{params:{region:e,initial:t,gender:r,page:a}}).then(function(a){i.singers=a.data,console.log(i.singers);for(var l=0;l<a.data.length;l++)null==i.singers[l].image?i.singers[l].image=s.a:i.singers[l].image=i.serverUrl+i.singers[l].image;console.log(i.singers),i.axios.get(i.serverUrl+"/artist/filterArtistCount",{params:{region:e,initial:t,gender:r}}).then(function(e){i.pageCount=Math.ceil(parseFloat(e.data)/10),console.log(i.singers)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},region_change_bg:function(e){var t=document.getElementById("region").getElementsByTagName("li");t[1].className="current";for(var r=0;r<t.length;r++)t[r].className=r==e?"current":""},initial_change_bg:function(e){for(var t=document.getElementById("initial").getElementsByTagName("li"),r=0;r<t.length;r++)t[r].className=r==e?"current":""},gender_change_bg:function(e){for(var t=document.getElementById("gender").getElementsByTagName("li"),r=0;r<t.length;r++)t[r].className=r==e?"current":""},addImage:function(e,t){this.beforeAvatarUpload(e)?(this.ruleForm.image=e.url,this.hasChangeImage=!0,t.length>1&&t.splice(0,1)):t.splice(t.length-1,1)},handleAvatarSuccess:function(){alert("上传成功"),this.hasChangeImage=!1,this.ruleForm.image="",this.$refs.uploadImage.clearFiles(),this.page=1,this.singerDisplay(0,"@",0,1)},beforeAvatarUpload:function(e){var t="image/jpg"===e.type||"image/jpeg",r=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是jpg/jpeg/png格式!"),r||this.$message.error("上传图片大小不能超过 2MB!"),t&&r},submitForm:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return e.$message({showClose:!0,message:"格式不正确",type:"error"}),!1;e.axios.post(e.serverUrl+"/artist/addArtist",{name:e.ruleForm.name,initial:e.ruleForm.initials,region:e.ruleForm.regions,gender:e.ruleForm.genders,birthplace:e.ruleForm.birthplace,occupation:e.ruleForm.occupation,birthday:e.ruleForm.birthday,representative:e.ruleForm.representative,intro:e.ruleForm.intro,country:e.ruleForm.country}).then(function(t){-1!=t?(e.ruleForm.id=t.data,e.hasChangeImage&&e.$nextTick(function(){e.$refs.uploadImage.submit()}),e.$refs.ruleForm.resetFields(),e.popoverVisible=!1,e.$message({showClose:!0,message:"歌手添加成功",type:"success"}),e.hasChangeImage||e.singerDisplay(0,"@",0,1),e.hasChangeImage=!1):e.$message({showClose:!0,message:"会话超时",type:"error"})}).catch(function(e){console.log(e)})})},cancelAdd:function(e){var t=this;this.$confirm("确认关闭？").then(function(r){t.$refs.ruleForm.resetFields(),t.popoverVisible=!1,e()}).catch(function(e){})}}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-head"),e._v(" "),r("div",{staticClass:"main"},[r("div",{staticClass:"singer-nav"},[e._m(0),e._v(" "),r("table",{staticStyle:{margin:"0 auto"},attrs:{id:"singer-nav-table"}},[r("div",{staticStyle:{"background-color":"rgb(251,251,253)",width:"1150px",height:"160px"}},[r("tr",[e._m(1),e._v(" "),r("td",{staticStyle:{"text-align":"left"}},[r("ul",{staticClass:"singer-nav-tag",attrs:{id:"initial"}},[r("li",{staticClass:"current long",staticStyle:{width:"40px","padding-left":"3px","padding-right":"3px","margin-right":"5px","margin-top":"12px"},attrs:{id:"all"},on:{click:function(t){e.initial_change_bg(0),e.singerDisplay(-1,"@",-1,0)}}},[e._v("热门")]),e._v(" "),e._l(e.items,function(t){return r("li",{staticStyle:{"margin-top":"12px"},on:{click:function(r){e.initial_change_bg(t.charCodeAt()-64),e.singerDisplay(-1,t,-1,0)}}},[e._v(e._s(t))])})],2)])]),e._v(" "),r("tr",[e._m(2),e._v(" "),r("td",[r("ul",{staticClass:"singer-nav-tag",attrs:{id:"region"}},[r("li",{staticClass:"current",on:{click:function(t){e.region_change_bg(0),e.singerDisplay(0,"!",-1,0)}}},[e._v("全部")]),e._v(" "),r("li",{on:{click:function(t){e.region_change_bg(1),e.singerDisplay(1,"!",-1,0)}}},[e._v("内地")]),e._v(" "),r("li",{on:{click:function(t){e.region_change_bg(2),e.singerDisplay(2,"!",-1,0)}}},[e._v("港台")]),e._v(" "),r("li",{on:{click:function(t){e.region_change_bg(3),e.singerDisplay(3,"!",-1,0)}}},[e._v("欧美")]),e._v(" "),r("li",{on:{click:function(t){e.region_change_bg(4),e.singerDisplay(4,"!",-1,0)}}},[e._v("日韩")]),e._v(" "),r("li",{on:{click:function(t){e.region_change_bg(5),e.singerDisplay(5,"!",-1,0)}}},[e._v("其他")])])])]),e._v(" "),r("tr",[e._m(3),e._v(" "),r("td",[r("ul",{staticClass:"singer-nav-tag",attrs:{id:"gender"}},[r("li",{staticClass:"current",on:{click:function(t){e.gender_change_bg(0),e.singerDisplay(-1,"!",0,0)}}},[e._v("全部")]),e._v(" "),r("li",{on:{click:function(t){e.gender_change_bg(1),e.singerDisplay(-1,"!",1,0)}}},[e._v("男")]),e._v(" "),r("li",{on:{click:function(t){e.gender_change_bg(2),e.singerDisplay(-1,"!",2,0)}}},[e._v("女")]),e._v(" "),r("li",{on:{click:function(t){e.gender_change_bg(3),e.singerDisplay(-1,"!",3,0)}}},[e._v("组合")])])])])])])]),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"grid-content bg-purple-dark"})])],1),e._v(" "),r("div",{staticClass:"addArtist"},[r("el-popover",{ref:"",attrs:{placement:"top",width:"820",trigger:"click"},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px","label-position":"right",inline:!0}},[r("el-form-item",[r("div",{staticClass:"introTitle"},[r("p",[e._v("填写歌手信息")])])]),e._v(" "),r("el-form-item",{attrs:{label:"歌手名称",prop:"name",size:"large"}},[r("div",{staticClass:"bigIntro"},[r("el-input",{attrs:{placeholder:"30字以内"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)]),e._v(" "),r("el-form-item",{attrs:{label:"性别",prop:"genders"},model:{value:e.ruleForm.genders,callback:function(t){e.$set(e.ruleForm,"genders",t)},expression:"ruleForm.genders"}},[r("div",{staticClass:"intro"},[r("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.genders,callback:function(t){e.$set(e.ruleForm,"genders",t)},expression:"ruleForm.genders"}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:"2"},model:{value:e.ruleForm.genders,callback:function(t){e.$set(e.ruleForm,"genders",t)},expression:"ruleForm.genders"}},[e._v("女")]),e._v(" "),r("el-radio",{attrs:{label:"3"},model:{value:e.ruleForm.genders,callback:function(t){e.$set(e.ruleForm,"genders",t)},expression:"ruleForm.genders"}},[e._v("组合")])],1)]),e._v(" "),r("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[r("div",{staticClass:"intro"},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择出生日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.ruleForm.birthday,callback:function(t){e.$set(e.ruleForm,"birthday",t)},expression:"ruleForm.birthday"}})],1)]),e._v(" "),r("el-form-item",{attrs:{label:"国籍",prop:"country"}},[r("div",{staticClass:"intro"},[r("el-input",{attrs:{placeholder:"15字以内"},model:{value:e.ruleForm.country,callback:function(t){e.$set(e.ruleForm,"country",t)},expression:"ruleForm.country"}})],1)]),e._v(" "),r("el-form-item",{attrs:{label:"出生地",prop:"birthplace"}},[r("div",{staticClass:"intro"},[r("el-input",{attrs:{placeholder:"30字以内"},model:{value:e.ruleForm.birthplace,callback:function(t){e.$set(e.ruleForm,"birthplace",t)},expression:"ruleForm.birthplace"}})],1)]),e._v(" "),r("el-form-item",{attrs:{label:"首字母",prop:"initials"}},[r("div",{staticClass:"intro"},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.initials,callback:function(t){e.$set(e.ruleForm,"initials",t)},expression:"ruleForm.initials"}},[r("el-option",{attrs:{label:"A",value:"A"}}),e._v(" "),r("el-option",{attrs:{label:"B",value:"B"}}),e._v(" "),r("el-option",{attrs:{label:"C",value:"C"}}),e._v(" "),r("el-option",{attrs:{label:"D",value:"D"}}),e._v(" "),r("el-option",{attrs:{label:"E",value:"E"}}),e._v(" "),r("el-option",{attrs:{label:"F",value:"F"}}),e._v(" "),r("el-option",{attrs:{label:"G",value:"G"}}),e._v(" "),r("el-option",{attrs:{label:"H",value:"H"}}),e._v(" "),r("el-option",{attrs:{label:"I",value:"I"}}),e._v(" "),r("el-option",{attrs:{label:"J",value:"J"}}),e._v(" "),r("el-option",{attrs:{label:"K",value:"K"}}),e._v(" "),r("el-option",{attrs:{label:"L",value:"L"}}),e._v(" "),r("el-option",{attrs:{label:"M",value:"M"}}),e._v(" "),r("el-option",{attrs:{label:"N",value:"N"}}),e._v(" "),r("el-option",{attrs:{label:"O",value:"O"}}),e._v(" "),r("el-option",{attrs:{label:"P",value:"P"}}),e._v(" "),r("el-option",{attrs:{label:"Q",value:"Q"}}),e._v(" "),r("el-option",{attrs:{label:"R",value:"R"}}),e._v(" "),r("el-option",{attrs:{label:"S",value:"S"}}),e._v(" "),r("el-option",{attrs:{label:"T",value:"T"}}),e._v(" "),r("el-option",{attrs:{label:"U",value:"U"}}),e._v(" "),r("el-option",{attrs:{label:"V",value:"V"}}),e._v(" "),r("el-option",{attrs:{label:"W",value:"W"}}),e._v(" "),r("el-option",{attrs:{label:"X",value:"X"}}),e._v(" "),r("el-option",{attrs:{label:"Y",value:"Y"}}),e._v(" "),r("el-option",{attrs:{label:"Z",value:"Z"}}),e._v(" "),r("el-option",{attrs:{label:"其他",value:"#"}})],1)],1)]),e._v(" "),r("el-form-item",{attrs:{label:"歌手地区",prop:"regions"}},[r("div",{staticClass:"intro"},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.regions,callback:function(t){e.$set(e.ruleForm,"regions",t)},expression:"ruleForm.regions"}},[r("el-option",{attrs:{label:"内地",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"港台",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"欧美",value:"3"}}),e._v(" "),r("el-option",{attrs:{label:"日韩",value:"4"}}),e._v(" "),r("el-option",{attrs:{label:"其他",value:"5"}})],1)],1)]),e._v(" "),r("el-form-item",{attrs:{label:"职业",prop:"occupation"}},[r("div",{staticClass:"intro"},[r("el-input",{attrs:{placeholder:"10字以内"},model:{value:e.ruleForm.occupation,callback:function(t){e.$set(e.ruleForm,"occupation",t)},expression:"ruleForm.occupation"}})],1)]),e._v(" "),r("el-form-item",{attrs:{label:"代表作品",prop:"representative"}},[r("div",{staticClass:"intro"},[r("el-input",{attrs:{placeholder:"30字以内"},model:{value:e.ruleForm.representative,callback:function(t){e.$set(e.ruleForm,"representative",t)},expression:"ruleForm.representative"}})],1)]),e._v(" "),r("el-form-item",{attrs:{label:"歌手简介",prop:"intro"}},[r("div",{staticClass:"bigIntro"},[r("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入歌手简介，680字以内"},model:{value:e.ruleForm.intro,callback:function(t){e.$set(e.ruleForm,"intro",t)},expression:"ruleForm.intro"}})],1)]),e._v(" "),r("el-form-item",{attrs:{label:"上传图片",prop:"image"}},[r("div",{staticClass:"bigIntro"},[r("el-upload",{ref:"uploadImage",staticClass:"avatar-uploader",attrs:{"auto-upload":!1,action:"/hifive/upload/uploadArtistImage","show-file-list":!1,data:{id:e.ruleForm.id},"on-change":e.addImage,"on-success":e.handleAvatarSuccess,accept:".jpg, .jpeg, .png"}},[""!=e.ruleForm.image?r("img",{staticClass:"avatar",attrs:{src:e.ruleForm.image}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),r("div",{attrs:{clss:"imageTip"}},[r("div",[e._v("图片大小不超过2M")]),e._v(" "),r("div",[e._v("上传图片格式为:jpg/jpeg/png")])])]),e._v(" "),r("br"),e._v(" "),r("el-form-item",[r("div",[r("el-button",{staticClass:"formbtn",attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("完成")]),e._v(" "),r("el-button",{on:{click:e.cancelAdd}},[e._v("取消")])],1)])],1),e._v(" "),r("el-button",{attrs:{slot:"reference",id:"addbtn"},on:{click:function(t){e.popoverVisible=!0}},slot:"reference"},[r("i",{staticClass:"el-icon-plus"}),e._v("添加歌手")])],1)],1),e._v(" "),r("ul",{attrs:{id:"singerlist"}},e._l(e.singers,function(t){return r("li",{staticClass:"singerli"},[r("div",{staticClass:"singer"},[r("router-link",{attrs:{to:{path:"/admin/artistdetail",query:{id:t.id}}}},[r("img",{staticStyle:{"border-radius":"100%",padding:"20px"},attrs:{src:t.image,alt:""}}),e._v(" "),r("p",[e._v(e._s(t.name))])])],1)])})),e._v(" "),r("el-pagination",{staticClass:"pagination",attrs:{layout:"prev, pager, next","page-count":e.pageCount},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),r("div",{staticClass:"footer"},[r("v-foot")],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"navTitle"},[t("p",[this._v("歌手快速检索")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",{staticClass:"cl long"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",{staticClass:"cl"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",{staticClass:"cl gender"})])}]};var c=r("vSla")(n,o,!1,function(e){r("sKqH")},"data-v-2a2f0801",null);t.default=c.exports},sKqH:function(e,t){}});
//# sourceMappingURL=14.255d4f2e5711d13bd4f0.js.map